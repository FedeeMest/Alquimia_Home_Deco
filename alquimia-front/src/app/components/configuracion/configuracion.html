<div class="container mx-auto mt-8 p-6 max-w-lg bg-white rounded-xl shadow border border-slate-200">
    <h2 class="text-2xl font-bold mb-6 text-slate-800">丘뙖잺 Configuraci칩n Financiera</h2>
    
    <div class="space-y-5">
      <div>
        <label class="block font-bold text-slate-700 mb-1">% Descuento Efectivo</label>
        <input type="number" [(ngModel)]="config.porcentaje_efectivo" class="w-full p-2 border rounded text-lg font-bold text-emerald-600 focus:ring-slate-500 focus:border-slate-500">
      </div>
      
      <div>
        <label class="block font-bold text-slate-700 mb-1">% Recargo Tarjeta</label>
        <input type="number" [(ngModel)]="config.porcentaje_tarjeta" class="w-full p-2 border rounded text-lg font-bold text-blue-600 focus:ring-slate-500 focus:border-slate-500">
      </div>

      <div>
        <label class="block font-bold text-slate-700 mb-1">% Recargo Local</label>
        <input type="number" [(ngModel)]="config.porcentaje_local" class="w-full p-2 border rounded text-lg font-bold text-indigo-600 focus:ring-slate-500 focus:border-slate-500">
      </div>

      <button (click)="guardar()" class="w-full bg-slate-800 hover:bg-slate-700 text-white py-3 rounded-lg font-bold transition">
          Guardar Configuraci칩n
      </button>

      <hr class="border-slate-200">

      <div class="bg-slate-50 p-4 rounded-lg border border-slate-200">
          <p class="text-sm text-slate-500 mb-3">Si cambiaste los porcentajes, puedes actualizar todos los productos existentes aqu칤:</p>
          <button (click)="aplicarATodos()" class="w-full bg-slate-200 hover:bg-slate-300 text-slate-700 py-2 rounded-lg font-semibold transition text-sm">
              游댃 Aplicar cambios a TODOS los productos
          </button>
      </div>
      <div class="bg-white shadow-md rounded-lg p-6 mb-6 border-l-4 border-blue-500">
    <div class="flex items-center mb-4">
        <i class="bi bi-tags-fill text-2xl text-blue-600 mr-3"></i>
        <div>
            <h2 class="text-xl font-bold text-gray-800">Actualizaci칩n Masiva de Precios</h2>
            <p class="text-sm text-gray-500">Define una ganancia general para todo el cat치logo.</p>
        </div>
    </div>

    <div class="bg-yellow-50 border border-yellow-200 rounded p-3 mb-4 flex items-start">
        <i class="bi bi-exclamation-triangle-fill text-yellow-600 mr-2 mt-1"></i>
        <p class="text-sm text-yellow-800">
            <strong>Atenci칩n:</strong> Esta acci칩n recalcular치 el precio final de 
            <span class="underline">todos los productos</span> bas치ndose en su costo actual y el porcentaje que ingreses aqu칤.
        </p>
    </div>

    <div class="flex flex-col sm:flex-row gap-4 items-end">
        <div class="w-full sm:w-1/3">
            <label class="block text-sm font-medium text-gray-700 mb-1">Nueva Ganancia (%)</label>
            <div class="relative">
                <input 
                    type="number" 
                    [(ngModel)]="gananciaMasiva"
                    placeholder="Ej: 50"
                    class="w-full pl-3 pr-10 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"
                >
                <span class="absolute right-3 top-2 text-gray-400 font-bold">%</span>
            </div>
        </div>

        <button 
            (click)="aplicarGananciaMasiva()"
            [disabled]="loadingMasivo || !gananciaMasiva"
            class="w-full sm:w-auto px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg shadow transition-all disabled:opacity-50 disabled:cursor-not-allowed flex justify-center items-center gap-2"
        >
            <span *ngIf="loadingMasivo" class="animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"></span>
            <span *ngIf="!loadingMasivo">Aplicar a Todo el Cat치logo</span>
        </button>
    </div>
</div>
    </div>
    <hr class="my-8 border-gray-200">

<div class="bg-yellow-50 p-6 rounded-lg border border-yellow-200">
    <h3 class="text-lg font-bold text-yellow-800 mb-2">Zona de Mantenimiento</h3>
    <p class="text-sm text-yellow-700 mb-4">
        Utiliza esta herramienta si has importado productos masivamente y necesitas corregir los precios a $0.
    </p>
    
    <button 
        type="button" 
        (click)="recalcularPrecios()" 
        [disabled]="loadingFix"
        class="bg-yellow-600 hover:bg-yellow-700 text-white font-bold py-2 px-4 rounded flex items-center gap-2 disabled:opacity-50">
        
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="size-5" [class.animate-spin]="loadingFix">
            <path stroke-linecap="round" stroke-linejoin="round" d="M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99" />
        </svg>

        <span *ngIf="!loadingFix">Recalcular Precios Masivamente</span>
        <span *ngIf="loadingFix">Procesando...</span>
    </button>
</div>
</div>